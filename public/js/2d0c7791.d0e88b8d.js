(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0c7791"],{5187:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md q-gutter-md row justify-center"},[this.$firebase.auth().currentUser?a("div",{staticStyle:{"min-width":"342px"}},[a("q-card",{staticClass:"q-pa-md",attrs:{inline:"",color:"white"}},[a("q-card-section",{staticClass:"text-center"},[a("div",{staticClass:"text-subtitle2"},[t._v("Agenda do Pastor")])]),a("q-separator"),a("div",[a("q-form",{staticClass:"q-gutter-sm q-pa-sm",on:{submit:t.disponibilizar,reset:t.limparForm1}},[a("q-input",{ref:"input_dia",attrs:{label:"Dia",outlined:"","lazy-rules":"",rules:[function(t){return!!t||"Defina um dia."}],mask:"##/##/####"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{title:"Data",mask:"DD/MM/YYYY",minimal:""},on:{input:function(){t.$refs.qDateProxy.hide(),t.$refs.input_dia.blur()}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)]},proxy:!0}],null,!1,3480040071),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("q-select",{ref:"select_hour",attrs:{outlined:"",multiple:"",options:t.horarios,label:"Horários",separator:""},scopedSlots:t._u([{key:"option",fn:function(e){return[a("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[a("q-item-section",{attrs:{side:""}},[a("q-checkbox",{attrs:{val:e.opt},model:{value:t.hours,callback:function(e){t.hours=e},expression:"hours"}})],1),a("q-item-section",[a("q-item-label",{domProps:{innerHTML:t._s(e.opt)}})],1)],1)]}}],null,!1,301920589),model:{value:t.hours,callback:function(e){t.hours=e},expression:"hours"}}),a("q-checkbox",{attrs:{label:"Fila de espera"},model:{value:t.extra,callback:function(e){t.extra=e},expression:"extra"}}),a("div",[a("q-btn",{attrs:{label:"Disponibilizar",type:"submit",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Limpar",type:"reset",color:"primary",flat:""}})],1)],1)],1),a("br"),a("div",{staticStyle:{width:"100%"}},[t.agenda?a("q-markup-table",{attrs:{dense:"",separator:"cell"}},[a("thead",[a("tr",{staticClass:"bg-grey text-white"},[a("th",{staticClass:"text-center text-black"},[t._v("Data")]),a("th",{staticClass:"text-center text-black"},[t._v("Horários")]),a("th",{staticClass:"text-center text-black"},[t._v("Extras")]),a("th",{staticClass:"text-center text-black"},[t._v("Ação")])])]),a("tbody",t._l(t.agenda,(function(e){return a("tr",{key:e[".key"]},[a("td",{staticClass:"text-center"},[t._v(t._s(t.dia_mes_ano(e.data)))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.horarios))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.extra?"Sim":"Não"))]),a("td",{staticClass:"text-center"},[a("q-btn",{attrs:{dense:"",flat:"",icon:"delete_forever"},on:{click:function(a){return t.remove_disponib(e.data)}}})],1)])})),0)]):t._e()],1)],1)],1):t._e(),a("div",{staticStyle:{"min-width":"342px"}},[a("q-card",{staticClass:"q-pa-md",attrs:{inline:"",color:"white"}},[a("q-card-section",{staticClass:"text-center"},[a("div",{staticClass:"text-subtitle2"},[t._v("Agendamento")])]),a("q-separator"),a("div",[a("q-form",{staticClass:"q-gutter-sm q-pa-sm",on:{submit:t.agendar,reset:t.limparForm2}},[a("q-input",{attrs:{label:"Nome *","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Por favor digite seu nome"}]},model:{value:t.nome,callback:function(e){t.nome=e},expression:"nome"}}),a("q-select",{attrs:{outlined:"",label:"Data",options:t.datas_disponiveis,separator:""},on:{input:function(e){return t.mostra_horarios(t.data)}},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}),a("q-select",{attrs:{outlined:"",label:"Horário",options:t.horarios_disponiveis,separator:""},model:{value:t.hora,callback:function(e){t.hora=e},expression:"hora"}}),a("div",[a("q-btn",{attrs:{label:"Agendar",type:"submit",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Limpar",type:"reset",color:"primary",flat:""}})],1)],1)],1),a("br"),a("div",{staticStyle:{width:"100%"}},[t.aconselhamentos_marcados?a("q-markup-table",{attrs:{dense:"",separator:"cell"}},[a("thead",[a("tr",{staticClass:"bg-grey text-white"},[a("th",{staticClass:"text-center text-black"},[t._v("Data")]),a("th",{staticClass:"text-center text-black"},[t._v("Horários")]),a("th",{staticClass:"text-center text-black"},[t._v("Extras")]),a("th",{staticClass:"text-center text-black"},[t._v("Ação")])])]),a("tbody",t._l(t.agenda,(function(e){return a("tr",{key:e[".key"]},[a("td",{staticClass:"text-center"},[t._v(t._s(t.dia_mes_ano(e.data)))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.horarios))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.extra?"Sim":"Não"))]),a("td",{staticClass:"text-center"},[a("q-btn",{attrs:{dense:"",flat:"",icon:"delete_forever"},on:{click:function(a){return t.remove_disponib(e.data)}}})],1)])})),0)]):t._e()],1)],1)],1)])},i=[],o=(a("55dd"),a("28a5"),a("6762"),{name:"Aconselhamento",data:function(){return{date:"",hours:[13,14,15,16],horarios:[13,14,15,16],extra:!1,agenda:null,nome:"",data:"",hora:"",datas_disponiveis:[],horarios_disponiveis:[],aconselhamentos_marcados:null}},created:function(){var t=this,e=[];this.$db.ref("aconselhamentos_agenda").orderByPriority().on("value",(function(a){t.agenda=a.val(),a.forEach((function(t){var a=t.val().data,s=a.slice(-2),i=a.slice(4,-2),o=a.slice(0,4);a=s+"/"+i+"/"+o,e.includes(a)||e.push(a)}))})),this.datas_disponiveis=e},methods:{ano_mes_dia:function(t){var e=t.split("/"),a=e[2]+e[1]+e[0];return a},dia_mes_ano:function(t){if(t){var e=t.slice(-2),a=t.slice(4,-2),s=t.slice(0,4),i=e+"/"+a+"/"+s;return i}},disponibilizar:function(){var t=this;this.$refs.input_dia.validate(),this.$refs.input_dia.hasError?this.formHasError=!0:this.$db.ref("aconselhamentos_agenda").orderByChild("data").equalTo(this.ano_mes_dia(this.date)).once("value",(function(e){if(e.exists())t.$q.notify({color:"negative",textColor:"white",icon:"warning",position:"center",message:"Data já disponível!"});else{var a=t.$db.ref("aconselhamentos_agenda").push();a.setWithPriority({data:t.ano_mes_dia(t.date),horarios:t.hours.sort(),extra:t.extra},t.ano_mes_dia(t.date)),t.$q.notify({color:"positive",textColor:"white",icon:"event_available",position:"center",message:"Aconselhamento disponibilizado!"}),t.limparForm1()}}))},limparForm1:function(){this.date="",this.hours=[13,14,15,16],this.extra=!1,this.$refs.input_dia.resetValidation()},remove_disponib:function(t){var e=this;this.$db.ref("aconselhamentos_agenda").orderByChild("data").equalTo(t).on("child_added",(function(t){e.$db.ref("aconselhamentos_agenda").child(t.key).remove()}));var a=[],s=t.slice(-2),i=t.slice(4,-2),o=t.slice(0,4),r=s+"/"+i+"/"+o;this.datas_disponiveis.forEach((function(t){t!==r&&a.push(t)})),this.datas_disponiveis=a,this.$q.notify({color:"positive",textColor:"white",icon:"event_busy",position:"center",message:"Aconselhamento excluído!"})},mostra_horarios:function(t){var e=this,a=this.ano_mes_dia(t);this.hora="",this.horarios_disponiveis=[],this.$db.ref("aconselhamentos_agenda").orderByChild("data").equalTo(a).on("child_added",(function(t){e.horarios_disponiveis=t.val().horarios}))},agendar:function(){},limparForm2:function(){console.log(this.datas_disponiveis)}}}),r=o,n=a("2877"),l=a("fe09"),c=Object(n["a"])(r,s,i,!1,null,null,null);e["default"]=c.exports;c.options.components=Object.assign({QCard:l["b"],QCardSection:l["d"],QSeparator:l["F"],QForm:l["m"],QInput:l["r"],QIcon:l["o"],QPopupProxy:l["C"],QDate:l["i"],QSelect:l["E"],QItem:l["s"],QItemSection:l["u"],QCheckbox:l["h"],QItemLabel:l["t"],QBtn:l["a"],QMarkupTable:l["x"]},c.options.components||{})}}]);