(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"220d":function(t,i,e){"use strict";var a=e("239e"),n=e.n(a);n.a},"239e":function(t,i,e){},e36e:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-page",[e("div",{staticClass:"q-pa-md q-gutter-md row justify-center"},[e("q-card",{staticClass:"q-pa-md q-mb-lg",staticStyle:{"min-width":"342px"},attrs:{inline:"",color:"white"}},[e("q-card-section",{staticClass:"text-center"},[e("div",{staticClass:"text-subtitle2"},[t._v("Meus dados")])]),e("q-separator"),e("q-card-section",{staticClass:"q-pa-md",staticStyle:{margin:"auto",width:"max-content"}},[t.user.photoURL?e("q-img",{staticStyle:{"font-size":"10em"},attrs:{src:t.user.photoURL}}):t._e(),e("q-input",{attrs:{label:"Nome",readonly:""},model:{value:t.user.displayName,callback:function(i){t.$set(t.user,"displayName",i)},expression:"user.displayName"}}),e("q-input",{attrs:{label:"E-mail",readonly:""},model:{value:t.user.email,callback:function(i){t.$set(t.user,"email",i)},expression:"user.email"}}),e("q-input",{attrs:{label:"Contato",readonly:""},model:{value:t.perfil.contato,callback:function(i){t.$set(t.perfil,"contato",i)},expression:"perfil.contato"}}),e("q-input",{attrs:{label:"Data de nascimento",readonly:""},model:{value:t.perfil.nascimento,callback:function(i){t.$set(t.perfil,"nascimento",i)},expression:"perfil.nascimento"}})],1),e("q-card-actions",{staticClass:"q-mt-lg",attrs:{align:"center"}},[e("q-btn",{attrs:{label:"Perfil",to:"/profile",color:"primary"}}),e("q-btn",{attrs:{label:"Sair",color:"primary"},on:{click:t.sair}})],1)],1),e("q-card",{staticClass:"q-pa-sm q-mb-lg",staticStyle:{"min-width":"342px",height:"fit-content"},attrs:{inline:"",color:"white"}},[e("q-card-section",{staticClass:"text-left",staticStyle:{padding:"8px"}},[e("div",{staticClass:"text-subtitle2",staticStyle:{display:"inline"}},[t._v("Notifica√ß√µes")]),t.$q.platform.is.ios?t._e():e("div",{staticClass:"float-right",staticStyle:{"margin-top":"-10px"}},[e("q-toggle",{ref:"toggle_ntf",attrs:{"unchecked-icon":"notifications_off","checked-icon":"notifications_active",color:"blue-8"},on:{input:function(i){return t.receber_notificacoes()}},model:{value:t.notifications,callback:function(i){t.notifications=i},expression:"notifications"}})],1)]),t.$q.platform.is.ios?e("div",[e("q-separator"),e("br"),e("p",[t._v("Infelizmente as notifica√ß√µes ainda n√£o funcionam neste dispositivo, mas no √≠cone "),e("q-icon",{attrs:{name:"notifications_active"}}),t._v(" aqui em cima voc√™ ver√° todas elas!")],1)],1):t._e()],1)],1),t.admin?e("q-page-sticky",{attrs:{position:"bottom-right",offset:[8,8]}},[e("q-fab",{attrs:{icon:"settings",color:"grey-7",direction:"up"}},[t.admin?e("q-fab-action",{attrs:{"external-label":"","label-position":"left",color:"grey-7",to:"/users",icon:"group",label:"Usu√°rios"}}):t._e()],1)],1):t._e()],1)},n=[],o=(e("a481"),e("28a5"),{name:"Usu√°rio",data:function(){return{user:this.$firebase.auth().currentUser,perfil:{nome:"",contato:"",nascimento:""},admin:!1,notifications:!1}},mounted:function(){var t=this;this.$firebase.auth().onAuthStateChanged((function(i){t.user=i||null})),t.user&&t.getProfile(t.user.uid);var i=window.OneSignal;i.push((function(){i.isPushNotificationsEnabled().then((function(i){i&&(t.notifications=!0)}))}))},methods:{getProfile:function(t){var i=this;this.$db.ref("perfis").orderByChild("id").equalTo(t).once("child_added",(function(t){i.perfil=t.val(),i.admin=t.val().admin}))},sair:function(){var t=this,i="";if(this.user.displayName){var e=this.user.displayName.split(" ");i=e[0]}this.$firebase.auth().signOut().then((function(){t.$q.notify({message:"At√© mais "+i+"!",color:"blue-8",position:"center",icon:"pan_tool"}),window.localStorage.setItem("username",""),t.$router.replace("/")}))},receber_notificacoes:function(){var t=this,i=window.OneSignal;t.$refs.toggle_ntf.value?(i.setSubscription(!1),t.notifications=!1,t.$q.notify({message:"Notifica√ß√µes desabilitadas.",color:"negative",position:"center",icon:"chat"})):i.push((function(){var e=i.isPushNotificationsSupported();e?i.push(["getNotificationPermission",function(e){"granted"===e?i.push((function(){i.isPushNotificationsEnabled().then((function(e){e?t.notifications=!0:(i.setSubscription(!0),t.notifications=!0,t.$q.notify({message:"Notifica√ß√µes habilitadas.",color:"positive",position:"center",icon:"chat"}))}))})):"denied"===e?(alert("Voc√™ deve limpar a configura√ß√£o de notifica√ß√µes do App para poder habilitar novamente."),t.notifications=!1):"default"===e&&(i.push((function(){i.showSlidedownPrompt({force:!0})})),i.push((function(){i.on("popoverAllowClick",(function(){setTimeout((function(){"granted"===Notification.permission?(i.setSubscription(!0),t.notifications=!0,t.$q.notify({message:"Notifica√ß√µes habilitadas.",color:"positive",position:"center",icon:"chat"})):t.notifications=!1}),5e3)}))})),i.push((function(){i.on("popoverCancelClick",(function(){t.notifications=!1}))})))}]):t.$q.notify({message:"Infelizmente as notifica√ß√µes ainda n√£o funcionam no iPhone, mas no √≠cone üîî aqui em cima voc√™ ver√° todas elas!",color:"negative",position:"center",icon:"chat",html:!0})}))}}}),s=o,c=(e("220d"),e("2877")),r=e("eebe"),l=e.n(r),f=e("9989"),u=e("f09f"),d=e("a370"),p=e("eb85"),m=e("068f"),h=e("27f9"),b=e("4b7e"),g=e("9c40"),v=e("9564"),q=e("0016"),y=e("de5e"),w=e("c294"),S=e("72db"),_=Object(c["a"])(s,a,n,!1,null,"20b659fe",null);i["default"]=_.exports;l()(_,"components",{QPage:f["a"],QCard:u["a"],QCardSection:d["a"],QSeparator:p["a"],QImg:m["a"],QInput:h["a"],QCardActions:b["a"],QBtn:g["a"],QToggle:v["a"],QIcon:q["a"],QPageSticky:y["a"],QFab:w["a"],QFabAction:S["a"]})}}]);