(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"5c64":function(e,i,t){},"7d32":function(e,i,t){"use strict";var o=t("5c64"),n=t.n(o);n.a},dc6c:function(e,i,t){"use strict";t.r(i);var o=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("q-page",{staticClass:"q-pa-md flex-center"},[e.user?t("q-card",{staticClass:"card-sign-in q-pa-md",attrs:{inline:"",color:"white"}},[t("div",{staticClass:"float-left"},[t("q-toggle",{ref:"toggle_ntf",attrs:{"unchecked-icon":"notifications_off","checked-icon":"notifications_active",color:"blue-8"},on:{input:function(i){return e.receber_notificacoes()}},model:{value:e.notifications,callback:function(i){e.notifications=i},expression:"notifications"}})],1),t("q-card-section",{staticClass:"text-center"},[t("div",{staticClass:"text-subtitle2"},[e._v("Meus dados")])]),t("q-separator"),t("q-card-section",{staticClass:"q-pa-md",staticStyle:{margin:"auto",width:"max-content"}},[t("q-input",{attrs:{label:"Nome",readonly:""},model:{value:e.user.displayName,callback:function(i){e.$set(e.user,"displayName",i)},expression:"user.displayName"}}),t("q-input",{attrs:{label:"E-mail",readonly:""},model:{value:e.user.email,callback:function(i){e.$set(e.user,"email",i)},expression:"user.email"}}),t("q-input",{attrs:{label:"Contato",readonly:""},model:{value:e.perfil.contato,callback:function(i){e.$set(e.perfil,"contato",i)},expression:"perfil.contato"}}),t("q-input",{attrs:{label:"Data de nascimento",readonly:""},model:{value:e.perfil.nascimento,callback:function(i){e.$set(e.perfil,"nascimento",i)},expression:"perfil.nascimento"}})],1),t("q-card-actions",{staticClass:"q-mt-lg",attrs:{align:"center"}},[t("q-btn",{attrs:{label:"Perfil",to:"/profile",color:"primary"}}),t("q-btn",{attrs:{label:"Sair",color:"primary"},on:{click:e.sair}})],1)],1):t("q-card",{staticClass:"q-pa-md",attrs:{inline:"",color:"white"}},[t("div",{staticClass:"float-left"},[t("q-toggle",{ref:"toggle_ntf",attrs:{"unchecked-icon":"notifications_off","checked-icon":"notifications_active",color:"blue-8"},on:{input:function(i){return e.receber_notificacoes()}},model:{value:e.notifications,callback:function(i){e.notifications=i},expression:"notifications"}})],1),t("div",{staticClass:"float-right"},[t("q-btn",{attrs:{color:"grey-7",round:"",flat:"",icon:"o_live_help"}},[t("q-menu",{attrs:{anchor:"bottom left",self:"top middle","auto-close":""}},[t("q-list",{staticStyle:{width:"max-content"}},[t("q-item",{attrs:{clickable:""},on:{click:e.resetar_senha}},[t("q-item-section",[e._v("Esqueci minha senha")])],1)],1)],1)],1)],1),t("q-card-section",{staticClass:"q-pa-md",staticStyle:{margin:"auto",width:"max-content"}},[t("q-icon",{staticStyle:{"font-size":"5em"},attrs:{name:"assignment_ind"}})],1),t("q-form",[t("q-input",{attrs:{label:"E-mail *","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Por favor digite seu e-mail"},function(e){return e.includes("@")&&e.includes(".")||"Digite um e-mail válido"}],clearable:""},on:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.entrar(i)}},model:{value:e.email,callback:function(i){e.email=i},expression:"email"}}),t("q-input",{attrs:{type:"password",label:"Senha *","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||"Digite uma senha"}],clearable:""},on:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.entrar(i)}},model:{value:e.senha,callback:function(i){e.senha=i},expression:"senha"}}),t("q-card-actions",{staticClass:"q-mt-lg",attrs:{align:"center"}},[t("q-btn",{attrs:{label:"Entrar",color:"secondary",loading:e.loading1},on:{click:e.entrar},scopedSlots:e._u([{key:"loading",fn:function(){return[t("q-spinner-facebook")]},proxy:!0}],null,!1,4102112682)}),t("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Criar conta",color:"primary",flat:"",loading:e.loading2},on:{click:e.registrar},scopedSlots:e._u([{key:"loading",fn:function(){return[t("q-spinner-facebook")]},proxy:!0}],null,!1,4102112682)})],1)],1)],1),t("br"),t("q-card",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"card-sign-in q-pa-md",attrs:{inline:"",color:"white"}},[t("q-card-section",{staticClass:"text-center"},[t("div",{staticClass:"text-subtitle2"},[e._v("Notificações")])]),t("q-separator"),t("br"),t("p",[e._v("Infelizmente as notificações ainda não funcionam em iPhone e iPad, mas no ícone "),t("q-icon",{attrs:{name:"notifications_active"}}),e._v(" aqui em cima você verá todas elas!")],1),t("div",{staticClass:"onesignal-customlink-container"})],1),e.admin?t("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[t("q-fab",{attrs:{icon:"settings",color:"grey-7",direction:"up"}},[t("q-fab-action",{attrs:{"external-label":"","label-position":"left",color:"grey-7",to:"/users",icon:"group",label:"Usuários"}})],1)],1):e._e()],1)},n=[],a=(t("28a5"),t("a481"),{name:"Login",data:function(){return{email:"",senha:"",loading1:!1,loading2:!1,codigo:"",user:this.$firebase.auth().currentUser,perfil:{nome:"",contato:"",nascimento:""},admin:!1,notifications:!1}},created:function(){this.user&&this.getProfile(this.user.uid);var e=this,i=window.OneSignal;i.push((function(){i.isPushNotificationsEnabled().then((function(i){i&&(e.notifications=!0)}))}))},methods:{registrar:function(){var e=this;this["loading2"]=!0,this.$firebase.auth().createUserWithEmailAndPassword(this.email,this.senha).then((function(i){e.$q.notify({message:"Sua conta foi criada com sucesso!",color:"positive",position:"center",icon:"how_to_reg"}),e.$router.replace("/")}),(function(i){e.codigo=i.code.split("/")[1].replace(/-/g,"_"),e.$q.notify({message:"Ops.. algo deu errado: "+e.$q.lang.auth[e.codigo],color:"negative",position:"center",icon:"error"}),e["loading2"]=!1,console.log(e.codigo),console.log(i.message)}))},getProfile:function(e){var i=this;this.$db.ref("perfis").orderByChild("id").equalTo(e).once("child_added",(function(e){i.perfil=e.val(),i.admin=e.val().admin}))},entrar:function(){var e=this;this["loading1"]=!0,this.$firebase.auth().signInWithEmailAndPassword(this.email,this.senha).then((function(i){var t=". Por favor, preencha seu perfil.";if(i.user.displayName){var o=i.user.displayName.split(" ");t=" "+o[0]+"!"}e.$q.notify({message:"Seja bem-vindo"+t,color:"positive",position:"center",icon:"assignment_turned_in"}),i.user.displayName?e.$router.replace("/"):e.$router.replace("/profile")}),(function(i){e.codigo=i.code.split("/")[1].replace(/-/g,"_"),e.$q.notify({message:"Ops.. algo deu errado: "+e.$q.lang.auth[e.codigo],color:"negative",position:"center",icon:"assignment_late"}),e["loading1"]=!1,console.log(e.codigo),console.log(i.message)}))},resetar_senha:function(){this.$router.replace("/reset_pwd")},sair:function(){var e=this;this.$firebase.auth().signOut().then((function(){e.$q.notify({message:"Até mais "+e.perfil.nome,color:"blue-8",position:"center",icon:"pan_tool"}),window.localStorage.setItem("username",""),e.$router.replace("/")}))},receber_notificacoes:function(){var e=this;console.log("passou aqui");var i=window.OneSignal;console.log(i),e.$refs.toggle_ntf.value?(i.setSubscription(!1),e.notifications=!1,e.$q.notify({message:"Notificações desabilitadas.",color:"negative",position:"center",icon:"chat"})):i.push((function(){var t=i.isPushNotificationsSupported();t?(console.log("notifications supported"),i.push(["getNotificationPermission",function(t){console.log(t),"granted"===t?i.push((function(){i.isPushNotificationsEnabled().then((function(t){t?e.notifications=!0:(i.setSubscription(!0),e.notifications=!0,e.$q.notify({message:"Notificações habilitadas.",color:"positive",position:"center",icon:"chat"}))}))})):"denied"===t?(alert("Você deve limpar a configuração de notificações do App para poder habilitar novamente."),e.notifications=!1):"default"===t&&(i.push((function(){i.showSlidedownPrompt({force:!0})})),console.log("Push"+Notification.permission),i.push((function(){i.on("popoverAllowClick",(function(){console.log("clicou em Certo"),setTimeout((function(){console.log(Notification.permission),"granted"===Notification.permission?(i.setSubscription(!0),e.notifications=!0,e.$q.notify({message:"Notificações habilitadas.",color:"positive",position:"center",icon:"chat"})):e.notifications=!1}),3e3)}))})),i.push((function(){i.on("popoverCancelClick",(function(){console.log("clicou em Agora nao"),e.notifications=!1}))})))}])):e.$q.notify({message:'Infelizmente as notificações ainda não funcionam no iPhone, mas no ícone <q-icon name="notifications_active" /> aqui em cima você verá todas elas!',color:"negative",position:"center",icon:"chat",html:!0})}))}}}),s=a,c=(t("7d32"),t("2877")),r=t("eebe"),l=t.n(r),u=t("9989"),f=t("f09f"),d=t("9564"),p=t("9c40"),m=t("4e73"),g=t("1c1c"),h=t("66e5"),b=t("4074"),q=t("a370"),v=t("0016"),y=t("0378"),k=t("27f9"),_=t("4b7e"),w=t("e669"),C=t("eb85"),$=t("de5e"),x=t("c294"),S=t("72db"),N=Object(c["a"])(s,o,n,!1,null,"0034f63e",null);i["default"]=N.exports;l()(N,"components",{QPage:u["a"],QCard:f["a"],QToggle:d["a"],QBtn:p["a"],QMenu:m["a"],QList:g["a"],QItem:h["a"],QItemSection:b["a"],QCardSection:q["a"],QIcon:v["a"],QForm:y["a"],QInput:k["a"],QCardActions:_["a"],QSpinnerFacebook:w["a"],QSeparator:C["a"],QPageSticky:$["a"],QFab:x["a"],QFabAction:S["a"]})}}]);